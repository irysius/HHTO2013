<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="javascript/jquery-1.10.2.min.js"></script>
        <script src="javascript/iscroll.js"></script>
        <script src="javascript/bootstrap.min.js"></script>
        <script src="javascript/createjs-2013.09.25.min.js"></script>
    </head>
    <body>
        <style>
            .timeline-outer {
                overflow: hidden; 
                width: 100%; 
                height: 500px;
            }
            .timeline-inner {
                overflow-y: auto; 
                overflow-x: hidden; 
                height: 99%; 
                width: 100%; 
                padding-right: 18px;
                background-color: #666;
            }
        </style>
        <div>
            <img src="images/profilebg_02.jpg" style="z-index: 1;"/>
            <div style="position: absolute; top: 0px; left: 0px; width: 768px;">
                <div style="text-align: center; margin-top: 75px;">
                    <img src="images/profileface.png" style="z-index: 2; "/>
                </div>

            </div>
        </div>
        <div>
            <canvas id="main-canvas"></canvas>
        </div>
        <div class="tab-content">
            <div class="tab-pane active" id="year">
                <div class="timeline-outer">
                    <div id="year-inner" class="timeline-inner">
                        <img id="year-timeline" src="images/timeline-line.jpg" />
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="month">
                <div class="timeline-outer">
                    <div id="month-inner" class="timeline-inner">
                        <img id="month-timeline" src="images/timeline-line.jpg" />
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="week">
                <div class="timeline-outer">
                    <div id="week-inner" class="timeline-inner">
                        <img id="week-timeline" src="images/timeline-line.jpg" />
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="day">
                <div class="timeline-outer">
                    <div id="day-inner" class="timeline-inner">
                        <img id="day-timeline" src="images/timeline-line.jpg" />
                    </div>
                </div>
            </div>
        </div>
        <script>
            var canvas, stage, preload;
            var currTab = "year";
            var selection;
            $(function () {
                replaceTimeline("year");

                canvas = document.getElementById("main-canvas");
                canvas.height = 75;
                canvas.width = 768;
                stage = new createjs.Stage(canvas);

                stage.addEventListener("stagemousedown", onMouseClick);

                var year = new createjs.Text("YEAR", "50px Calibri", "#666666");
                year.x = 96 - year.getMeasuredWidth() / 2;
                stage.addChild(year);

                var month = new createjs.Text("MONTH", "50px Calibri", "#666666");
                month.x = 288 - month.getMeasuredWidth() / 2;
                stage.addChild(month);

                var week = new createjs.Text("WEEK", "50px Calibri", "#666666");
                week.x = 480 - week.getMeasuredWidth() / 2;
                stage.addChild(week);

                var day = new createjs.Text("DAY", "50px Calibri", "#666666");
                day.x = 672 - day.getMeasuredWidth() / 2;
                stage.addChild(day);

                selection = new createjs.Shape();
                selection.graphics.beginFill('#93CCEA').drawRect(
                    0,
                    65,
                    canvas.width / 4,
                    10);
                stage.addChild(selection);

                createjs.Ticker.setInterval(window.requestAnimationFrame);
                createjs.Ticker.addEventListener("tick", tick);
            })
            function onMouseClick(evt) {
                $('#year').removeClass('active');
                $('#month').removeClass('active');
                $('#week').removeClass('active');
                $('#day').removeClass('active');
                if (evt.stageX < 192) {
                    $('#year').addClass('active');
                    currTab = "year";
                    scrollToCenter($('#year-inner'), $('#year-timeline'));
                } else if (evt.stageX < 384) {
                    $('#month').addClass('active');
                    currTab = "month";
                    scrollToCenter($('#month-inner'), $('#month-timeline'));
                } else if (evt.stageX < 576) {
                    $('#week').addClass('active');
                    currTab = "week";
                    scrollToCenter($('#week-inner'), $('#week-timeline'));
                } else {
                    $('#day').addClass('active');
                    currTab = "day";
                    scrollToCenter($('#day-inner'), $('#day-timeline'));
                }
            }
            function scrollToCenter(parent, inner) {
                $(parent).scrollTop(700);
            }
            function tick() {
                switch (currTab) {
                    case "year":
                        if (selection.x != 0) {
                            selection.x -= 5;
                            if (selection.x < 0)
                                selection.x = 0;
                        }
                        break;
                    case "month":
                        if (selection.x < 192) {
                            selection.x += 5;
                            if (selection.x > 192)
                                selection.x = 192;
                        } else if (selection.x > 192) {
                            selection.x -= 5;
                            if (selection.x < 192)
                                selection.x = 192;
                        }
                        break;
                    case "week":
                        if (selection.x < 384) {
                            selection.x += 5;
                            if (selection.x > 384)
                                selection.x = 384;
                        } else if (selection.x > 384) {
                            selection.x -= 5;
                            if (selection.x < 384)
                                selection.x = 384;
                        }
                        break;
                    case "day":
                        if (selection.x < 576) {
                            selection.x += 5;
                            if (selection.x > 576)
                                selection.x = 576;
                        }
                        break;
                }
                stage.update();
            }
            function prepareAssets() {

            }

            function replaceTimeline(range) {
                switch (range) {
                    case "year":
                        break;
                    case "month":
                        break;
                    case "week":
                        break;
                    case "day":
                        break;
                }
            }
        </script>
    </body>
</html>


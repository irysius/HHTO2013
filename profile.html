<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <link href="css/site.css" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="javascript/jquery-1.10.2.min.js"></script>
        <script src="javascript/createjs-2013.09.25.min.js"></script>
    </head>
    <body>
        <style>
            .timeline-outer {
                overflow: hidden; 
                width: 100%; 
                height: 754px;
            }
            .timeline-inner {
                overflow-y: auto; 
                overflow-x: hidden; 
                height: 99%; 
                width: 100%; 
                padding-right: 18px;
                background-color: #666;
            }
            .timeline-image {
                padding-left: 100px;
            }
            .button {
                background: #1DB1EE;
                padding: 6px 12px;
                border: 1px solid transparent;
                border-radius: 4px;
                color: White;
                width: 200px;
                font-size: 20px;
            }
        </style>
        <div>
            <div style="position: absolute; top: 0px; background: #1DB1EE; text-align: center; height: 100px; width: 768px;">
                <p style="font-size: 38px; color: White; margin-top: 20px;">Personal Health Passport</p>
            </div>
            <img src="images/profilebg_02.jpg" style="z-index: 1; margin-top: 100px;"/>
            <div style="position: absolute; top: 60px; left: 0px; width: 768px;">
                <div style="text-align: center; margin-top: 75px;">
                    <img src="images/profileface.png" style="z-index: 2; "/>
                    <p style="color: #DDD; font-size: 28px; margin-top: 5px;">Firstname Lastname</p>
                    <p style="color: #DDD; font-size: 18px;">Status: (Green)</p>
                    <button id="btnDetails" class="button" onclick="navigateToDetails();">DETAILS</button>
                </div>

            </div>
        </div>
        <div>
            <canvas id="main-canvas"></canvas>
        </div>
        <div>
            <div style="position: absolute; top: 618px; width: 768px;">
                <img src="images/gradient-overlay_top.png" style="z-index: 200; width: 768px;"/>
            </div>
            <div style="position: absolute; top: 1213px; width: 768px;">
                <img src="images/gradient-overlay-bottom.png" style="z-index: 200; width: 768px;"/>
            </div>
            <div class="tab-content" style="width: 768px;">
                <div class="tab-pane" id="year">
                    <div class="timeline-outer">
                        <div id="year-inner" class="timeline-inner">
                            <img id="year-timeline" class="timeline-image" src="images/timeline-line.jpg" />
                        </div>
                    </div>
                </div>
                <div class="tab-pane active" id="month">
                    <div class="timeline-outer">
                        <div id="month-inner" class="timeline-inner">
                            <img id="month-timeline" class="timeline-image" src="images/timeline-line.jpg" />
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="week">
                    <div class="timeline-outer">
                        <div id="week-inner" class="timeline-inner">
                            <img id="week-timeline" class="timeline-image" src="images/timeline-line.jpg" />
                        </div>
                    </div>
                </div>
                <div class="tab-pane" id="day">
                    <div class="timeline-outer">
                        <div id="day-inner" class="timeline-inner">
                            <img id="day-timeline" class="timeline-image" src="images/timeline-line.jpg" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var canvas, stage, preload;
            var currTab = "month";
            var selection;
            $(function () {
                canvas = document.getElementById("main-canvas");
                canvas.height = 75;
                canvas.width = 768;
                stage = new createjs.Stage(canvas);

                stage.addEventListener("stagemousedown", onMouseClick);

                var year = new createjs.Text("YEAR", "50px Calibri, Sans-Serif", "#666666");
                year.x = 96 - year.getMeasuredWidth() / 2;
                stage.addChild(year);

                var month = new createjs.Text("MONTH", "50px Calibri, Sans-Serif", "#666666");
                month.x = 288 - month.getMeasuredWidth() / 2;
                stage.addChild(month);

                var week = new createjs.Text("WEEK", "50px Calibri, Sans-Serif", "#666666");
                week.x = 480 - week.getMeasuredWidth() / 2;
                stage.addChild(week);

                var day = new createjs.Text("DAY", "50px Calibri, Sans-Serif", "#666666");
                day.x = 672 - day.getMeasuredWidth() / 2;
                stage.addChild(day);

                selection = new createjs.Shape();
                selection.graphics.beginFill('#DDD').drawRect(
                    0,
                    65,
                    canvas.width,
                    10);
                stage.addChild(selection);

                selection = new createjs.Shape();
                selection.graphics.beginFill('#1DB1EE').drawRect(
                    0,
                    65,
                    canvas.width / 4,
                    10);
                stage.addChild(selection);

                createjs.Ticker.setInterval(window.requestAnimationFrame);
                createjs.Ticker.addEventListener("tick", tick);

                scrollToCenter($('#year-inner'), $('#year-timeline'));
            })
            function onMouseClick(evt) {
                $('#year').removeClass('active');
                $('#month').removeClass('active');
                $('#week').removeClass('active');
                $('#day').removeClass('active');
                if (evt.stageX < 192) {
                    $('#year').addClass('active');
                    currTab = "year";
                    scrollToCenter($('#year-inner'), $('#year-timeline'));
                } else if (evt.stageX < 384) {
                    $('#month').addClass('active');
                    currTab = "month";
                    scrollToCenter($('#month-inner'), $('#month-timeline'));
                } else if (evt.stageX < 576) {
                    $('#week').addClass('active');
                    currTab = "week";
                    scrollToCenter($('#week-inner'), $('#week-timeline'));
                } else {
                    $('#day').addClass('active');
                    currTab = "day";
                    scrollToCenter($('#day-inner'), $('#day-timeline'));
                }
            }
            function scrollToCenter(parent, inner) {
                $(parent).scrollTop(800);
            }
            function tick() {
                switch (currTab) {
                    case "year":
                        if (selection.x != 0) {
                            selection.x -= 5;
                            if (selection.x < 0)
                                selection.x = 0;
                        }
                        break;
                    case "month":
                        if (selection.x < 192) {
                            selection.x += 5;
                            if (selection.x > 192)
                                selection.x = 192;
                        } else if (selection.x > 192) {
                            selection.x -= 5;
                            if (selection.x < 192)
                                selection.x = 192;
                        }
                        break;
                    case "week":
                        if (selection.x < 384) {
                            selection.x += 5;
                            if (selection.x > 384)
                                selection.x = 384;
                        } else if (selection.x > 384) {
                            selection.x -= 5;
                            if (selection.x < 384)
                                selection.x = 384;
                        }
                        break;
                    case "day":
                        if (selection.x < 576) {
                            selection.x += 5;
                            if (selection.x > 576)
                                selection.x = 576;
                        }
                        break;
                }
                stage.update();
            }
            function navigateToDetails() {
                window.location.href = "details.html";
            }
        </script>
    </body>
</html>


<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
        <link href="css/site.css" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="javascript/jquery-1.10.2.min.js"></script>
        <script src="javascript/createjs-2013.09.25.min.js"></script>
    </head>
    <body>
        <style>
        .tab-stuff {
                background: #EEE;
                text-align: center;
                width: 768px;
                height: 841px;
                padding-top: 35px;
        }
        </style>
        <div style="position: absolute; top: 0px; background: #1DB1EE; text-align: center; height: 100px; width: 768px;">
            <p style="font-size: 38px; color: White; margin-top: 20px;">Personal Health Passport</p>
        </div>
        <a href="profile.html" style="background-image: url(images/backarrow.png)" >
        </a>
        <img src="images/backarrow.png" style="position: absolute; top: 6px; left: 10px; height: 85px;" usemap="#backmap"/>
        <map name="backmap">
            <area shape="rect" coords="0, 0, 81, 160" href="profile.html" style="z-index: 100;" />
        </map>
        <img src="images/profilebg_02.jpg" style="z-index: 1; margin-top: 100px; width: 768px; height: 350px;" />
        <div style="position: absolute; top: 20px; left: 0px; width: 768px;">
            <div style="margin-top: 130px;">
                <img src="images/profileface.png" style="z-index: 2; margin-left: 20px;" />
            </div>
        </div>
        <div style="position: absolute; top: 20px; left: 0px; width: 768px;">
            <div style="margin-left: 325px; margin-top: 200px;">
                <p style="color: #DDD; font-size: 42px;">Firstname Lastname</p>
                <p style="color: #DDD; font-size: 24px;">Status: (Orange)</p>
            </div>
        </div>
        <div>
            <canvas id="main-canvas"></canvas>
        </div>
        <div class="tab-content">
            <div class="tab-pane tab-stuff active" id="one">
                <div>
                    <img src="images/adherancepage.png" />
                </div>
            </div>
            <div class="tab-pane tab-stuff" id="two">
                <div>
                    <img src="images/lifestyle.jpg" />
                </div>
            </div>
            <div class="tab-pane tab-stuff" id="three">
                <div>
                    <img src="images/medicationpage.png" />
                </div>
            </div>
        </div>
        <script>
            var canvas, stage, preload;
            var currTab = "one";
            var selection;
            $(function () {
                canvas = document.getElementById("main-canvas");
                canvas.height = 75;
                canvas.width = 768;
                stage = new createjs.Stage(canvas);

                stage.addEventListener("stagemousedown", onMouseClick);
                var y = canvas.height / 2 - 10;

                var one = new createjs.Text("ADHERENCE", "42px Calibri", "#666666");
                one.x = 128 - one.getMeasuredWidth() / 2;
                y = y - (one.getMeasuredHeight() / 2);
                one.y = y;
                stage.addChild(one);

                var two = new createjs.Text("LIFESTYLE", "42px Calibri", "#666666");
                two.x = 384 - two.getMeasuredWidth() / 2;
                two.y = y;
                stage.addChild(two);

                var three = new createjs.Text("MEDICATION", "42px Calibri", "#666666");
                three.x = 640 - three.getMeasuredWidth() / 2;
                three.y = y;
                stage.addChild(three);

                selection = new createjs.Shape();
                selection.graphics.beginFill('#DDD').drawRect(
                    0,
                    65,
                    canvas.width,
                    10);
                stage.addChild(selection);

                selection = new createjs.Shape();
                selection.graphics.beginFill('#1DB1EE').drawRect(
                    0,
                    65,
                    canvas.width / 3,
                    10);
                stage.addChild(selection);

                createjs.Ticker.setInterval(window.requestAnimationFrame);
                createjs.Ticker.addEventListener("tick", tick);
            })
            function onMouseClick(evt) {
                $('#one').removeClass('active');
                $('#two').removeClass('active');
                $('#three').removeClass('active');
                if (evt.stageX < 256) {
                    $('#one').addClass('active');
                    currTab = "one";
                } else if (evt.stageX < 512) {
                    $('#two').addClass('active');
                    currTab = "two";
                } else {
                    $('#three').addClass('active');
                    currTab = "three";
                }
            }
            function tick() {
                switch (currTab) {
                    case "one":
                        if (selection.x != 0) {
                            selection.x -= 5;
                            if (selection.x < 0)
                                selection.x = 0;
                        }
                        break;
                    case "two":
                        if (selection.x < 256) {
                            selection.x += 5;
                            if (selection.x > 256)
                                selection.x = 256;
                        } else if (selection.x > 256) {
                            selection.x -= 5;
                            if (selection.x < 256)
                                selection.x = 256;
                        }
                        break;
                    case "three":
                        if (selection.x < 512) {
                            selection.x += 5;
                            if (selection.x > 512)
                                selection.x = 512;
                        } else if (selection.x > 512) {
                            selection.x -= 5;
                            if (selection.x < 512)
                                selection.x = 512;
                        }
                        break;
                }
                stage.update();
            }
        </script>
    </body>
</html>
